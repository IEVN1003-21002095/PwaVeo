<div class="container-fluid bg-light min-vh-100 p-0">

  <header 
    class="w-100 mb-5 shadow-sm" 
    style="
      height: 300px; 
      background-image: url(); 
      background-size: cover; 
      background-position: center; 
    "
  >
    <div class="d-flex align-items-center justify-content-center h-100" style="background-color: rgba(0, 0, 0, 0.3);">
    </div>
  </header>

  <ng-container *ngIf="currentView() === 'catalogo'">

    <div class="container-central">
      <div class="d-flex justify-content-center align-items-center mb-5 position-relative">
        <h2 class="fw-bolder text-dark">Nuestros productos</h2>
        <button class="btn text-secondary position-absolute end-0" style="right: 15px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
            <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
          </svg>
        </button>
      </div>
    </div>
  
    <div class="container-central py-4 bg-custom-opacity"> 

      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
        
        <div *ngFor="let p of productos" class="col">
          <div 
            (click)="verDetalle(p.id)"
            class="card h-100 cursor-pointer shadow-none"
          >
            <!-- Imagen con margen interno dentro de la card -->
            <div class="card-img-top overflow-hidden producto-img-con-margen">
              <img 
                [src]="p.imagen" 
                class="w-100 h-100 object-fit-cover img-padding"
                [alt]="p.nombre"
              >
            </div>
  
            <div class="card-body text-center d-flex flex-column justify-content-between py-1">
              <h5 class="card-title fs-6 fw-semibold mb-1 text-truncate">
                {{ p.nombre }}
              </h5>
              <p class="card-text text-muted small mb-0">
                Gs. {{ p.precio | number:'1.0-0' }}
              </p>
            </div>
          </div>
        </div>
        
      </div>
  
      <div class="text-center mt-5 mb-4">
        <button 
          (click)="verMasProductos()"
          class="text-dark d-inline-flex align-items-center fw-normal p-0"
          style="font-size: 1.1rem; letter-spacing: 0.1em; background: none; border: none; cursor: pointer;"
        >
          VER MÁS 
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-right-short ms-2" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"/>
          </svg>
        </button>
      </div>

    </div>
  </ng-container>

  <app-detalles 
    *ngIf="currentView() === 'detalle'"
    [productId]="selectedProductId()"
    (goBack)="goBackToCatalog()">
  </app-detalles>

</div>

<style>
/* Contenedor central */
.container-central {
    max-width: 95%;
    margin: 0 auto;
}

/* Fondo semitransparente */
.bg-custom-opacity {
    background-color: rgba(202, 216, 229, 0.5) !important;
}

.cursor-pointer {
    cursor: pointer; 
}

.card {
    background: transparent;
    border: none;
    box-shadow: none;
    padding: 0.5rem;
}

/* Imagen con margen interno pequeño dentro de la card */
.producto-img-con-margen {
    aspect-ratio: 3 / 4; /* más alto que ancho */
    overflow: hidden;
    padding: 0.5rem; /* margen entre la imagen y la card */
}

.img-padding {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 0.25rem;
    transition: transform 0.3s ease;
}

.card:hover .img-padding {
    transform: scale(1.05);
}

.card-body h5,
.card-body p {
    background: transparent !important;
    padding: 0;
    margin: 0;
    color: #000;
    font-size: 0.9rem;
}

/* Responsive para móviles */
@media (max-width: 768px) {
    .producto-img-con-margen {
        aspect-ratio: 3 / 5;
        padding: 0.3rem;
    }
}
</style>
